name: boostrap

on:
    workflow_dispatch: 

jobs:
    bootstrap:
        runs-on: ubuntu-latest
        steps:
        - name: Check out repo
          uses: actions/checkout@v4
          with:
            fetch-depth: 0
        - name: Install dependencies
          run: pip3 install -r requirements.txt
        - name: Run bootstrap.sh
          run: ./bootstrap.sh
        - name: Commit files
          run: |
            git config --local user.email "github-actions[bot]@users.noreply.github.com"
            git config --local user.name "github-actions[bot]"
            git add -f *.csv
            git add -f *.db
            git commit -m "Update csv exports and db"